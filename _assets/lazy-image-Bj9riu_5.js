import{r as t,aF as ue,aG as X,aH as fe,aC as de,b as me,n as ge,c as Se,j as f,i as ee,a1 as ye,a as _e,az as ve,S as Y,aI as Z,aJ as Ee}from"./index-Jp8ywQ7B.js";const pe="100%",Ae="1.5",Ne="cover",O={defaultWidth:pe,defaultAspectRatio:Ae,defaultObjectFit:Ne};function Re(e,n,s){const[i,r]=t.useState({src:void 0,loading:!!e&&!n});return t.useEffect(()=>{if(!e||!ue()){r({src:void 0,loading:!1});return}if(n){const u=X(e);r({src:u,loading:!1});return}const c=fe(e);if(c){r({src:c,loading:!1});return}let o=!1;return r({src:void 0,loading:!0}),de(e,s).then(u=>{o||r({src:u,loading:!1})}).catch(()=>{if(!o){const u=X(e);r({src:u,loading:!1})}}),()=>{o=!0}},[e,n,s]),i}const be=ge.loaderTimeout;function he(){const{withTimeout:e}=me(),[n,s]=t.useState(void 0),[i,r]=t.useState(!1),[c,o]=t.useState(!1),u=t.useCallback(g=>{e(()=>{s(g)},g?0:be)},[e]);t.useEffect(()=>{n===!1?r(!0):n===!0&&o(!0)},[n]);const _=t.useCallback(()=>{s(void 0),r(!1),o(!1)},[]);return{ready:n,shouldAnimate:i,fadeIn:c,setReady:u,reset:_}}const Fe=t.forwardRef(({isOpen:e,onCancel:n,focusOnOpen:s=!0,maxWidth:i,maxHeight:r,width:c,height:o,sideGap:u,padding:_,border:g,borderRadius:v,backdropColor:A,backdropBlur:N,portalTarget:F,className:T,style:R,children:j,...x},I)=>{const S=t.useRef(null);t.useImperativeHandle(I,()=>S.current,[]);const[D,d]=t.useState(!1),y=t.useMemo(()=>({...{...i!=null?{"--dialog-max-width":i}:{},...r!=null?{"--dialog-max-height":r}:{},...c!=null?{"--dialog-width":c}:{},...o!=null?{"--dialog-height":o}:{},...u!=null?{"--dialog-side-gap":u}:{},..._!=null?{"--dialog-padding":_}:{},...g!=null?{"--dialog-border":g}:{},...v!=null?{"--dialog-border-radius":v}:{},...A!=null?{"--dialog-backdrop-color":A}:{},...N!=null?{"--dialog-backdrop-blur":N}:{}},...R??{}}),[i,r,c,o,u,_,g,v,A,N,R]);t.useEffect(()=>{d(!0)},[]),t.useEffect(()=>{Se(()=>{const l=S.current;if(l&&e!==void 0)try{e?(l.open||(l.showModal(),document.body.classList.add("no-scroll")),s&&l.focus()):l.open&&(l.close(),document.body.classList.remove("no-scroll"))}catch{}})},[e,s]);const k=l=>{if(l.preventDefault(),n){n();return}e===void 0&&S.current?.close()},E=f.jsx("dialog",{ref:S,className:ee("dialog",T),style:y,onCancel:k,...x,children:j});if(!D)return null;const m=F??(typeof document<"u"?document.body:null);return m?ye.createPortal(E,m):null}),Te=(e,n)=>{const s=n-1,i=n-2;return n<=1?"100%":e===s?"70%":e===i?"85%":"100%"},je=({rows:e=0})=>e<=0?f.jsx("div",{className:"skeleton skeleton__block","aria-busy":"true"}):f.jsx("div",{className:"skeleton skeleton__rows","aria-busy":"true",children:Array.from({length:e}).map((n,s)=>f.jsx("div",{className:"skeleton__row",style:{width:Te(s,e)}},s))}),ke=O.defaultWidth,we=O.defaultAspectRatio,P=O.defaultObjectFit,U=e=>e!=null&&e!=="",L=e=>e==="auto"?void 0:e,xe=e=>e==="auto"||e===""?void 0:e,Ie=e=>{if(e==null||e===""||e==="auto")return;if(typeof e=="number")return Number.isFinite(e)&&e>0?e:void 0;const n=String(e).trim();if(!n)return;if(n.includes("/")){const[i,r]=n.split("/"),c=Number.parseFloat(i.trim()),o=Number.parseFloat(r.trim());return Number.isFinite(c)&&Number.isFinite(o)&&c>0&&o>0?c/o:void 0}const s=Number.parseFloat(n);if(Number.isFinite(s)&&s>0)return s};function De({src:e,disableBlob:n=!1,disableLazyLoading:s=!1,objectFit:i,aspectRatio:r,clickOpenMode:c="none",style:o,className:u,onLoad:_,onError:g,fetchPriority:v="auto",loading:A="eager",decoding:N="async",width:F,height:T,onClick:R,alt:j,...x},I){const{screenType:S}=_e(),D=ve(),{src:d}=Re(e,n,v),{ready:y,setReady:k,reset:E}=he(),[m,l]=t.useState(!1),[b,h]=t.useState("none"),{boxStyle:te,imgStyle:se,useSizer:ne}=t.useMemo(()=>{const a=L(F),H=L(T),J=xe(r),q=U(a),C=U(H),G=U(J),$=!G&&!C,le=q&&C?void 0:G?J:$?we:void 0,ie=q?a:ke,K=C?H:void 0,ce=$&&i==null?P:i??P,Q=Ie(le),V=K==null&&Q!=null;return{boxStyle:{width:ie,height:K,...V?{"--lazy-image-ar":Q}:{}},imgStyle:{objectFit:ce},useSizer:V}},[r,i,F,T]),z=t.useMemo(()=>!(S===Y.Mobile||S===Y.Error),[S]),w=t.useCallback(a=>{k(a)},[k]);t.useEffect(()=>()=>{l(!1)},[]),t.useEffect(()=>{!d&&m&&l(!1)},[d,m]),t.useEffect(()=>{y===!1&&!s&&m&&l(!1)},[y,s,m]),t.useEffect(()=>{s||(e?(E(),h("none"),w(!1)):(E(),h("none")))},[e,E,w,s]),t.useEffect(()=>{if(!s){if(y===!1)h("fade");else if(y===!0&&b==="fade"){const a=requestAnimationFrame(()=>{h("fade-in")});return()=>{cancelAnimationFrame(a)}}}},[y,b,s]),t.useEffect(()=>{s&&(E(),h("none"))},[s,E]),t.useEffect(()=>{m&&!z&&l(!1)},[z,m]),t.useEffect(()=>{u&&Z()},[u]),t.useEffect(()=>{o&&Z()},[o]);const p=y===!1&&!s,W=c==="tab"&&!!d&&!p,M=c==="dialog"&&!!d&&!p&&z,B=(!!R||W||M)&&!p,ae=s?{}:{"lazy-image__fade":b==="fade"||b==="fade-in","lazy-image__fade-in":b==="fade-in"},re=p?{}:{"lazy-image__clickable":B},oe=ne?{"lazy-image__sizer":!0}:{};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:ee("lazy-image",ae,re,oe),style:te,children:[p&&f.jsx(Ee,{children:f.jsx("div",{className:"lazy-image__skeleton",children:f.jsx(je,{})})}),d&&f.jsx("img",{...x,ref:I,src:d,alt:j,className:"lazy-image__image",draggable:!1,style:se,onClick:a=>{if(p){a.preventDefault();return}if(R?.(a),!a.defaultPrevented){if(W){D(d);return}M&&l(!0)}},onLoad:a=>{w(!0),_?.(a)},onError:a=>{w(!0),g?.(a)},loading:A,decoding:N,...v?{fetchpriority:v}:{}})]}),B&&f.jsx(Fe,{isOpen:m,className:"lazy-image__dialog",onCancel:()=>l(!1),onClick:a=>{a.target===a.currentTarget&&l(!1)},children:f.jsx("img",{src:d,alt:j,className:"lazy-image__dialog-image",draggable:!1,onClick:a=>{a.stopPropagation()}})})]})}const Ce=t.forwardRef(De);export{Ce as L,je as S,he as u};
