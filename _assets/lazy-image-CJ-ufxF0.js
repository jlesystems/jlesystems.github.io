import{b as fe,r as de,j as f,z as me,a as ge,a2 as Se,S as Y,a5 as Z,a6 as ye}from"./index-Cf8TGb8v.js";import{a as t,i as _e,ai as P,aj as ve,v as Ee,S as pe,d as te}from"./preload-BazJkaLr.js";const Ne="100%",Re="1.5",Ae="cover",W={defaultWidth:Ne,defaultAspectRatio:Re,defaultObjectFit:Ae};function be(e,n,s,i){const[u,r]=t.useState({src:void 0,loading:!!e&&!n});return t.useEffect(()=>{if(!e||!_e()){r({src:void 0,loading:!1});return}if(n){const c=P(e,s);r({src:c,loading:!1});return}const l=ve(e);if(l){r({src:l,loading:!1});return}let d=!1;return r({src:void 0,loading:!0}),Ee(e,i).then(c=>{d||r({src:c,loading:!1})}).catch(()=>{if(!d){const c=P(e,s);r({src:c,loading:!1})}}),()=>{d=!0}},[e,n,s,i]),u}const Fe=pe.loaderTimeout;function Te(){const{withTimeout:e}=fe(),[n,s]=t.useState(void 0),[i,u]=t.useState(!1),[r,l]=t.useState(!1),d=t.useCallback(g=>{e(()=>{s(g)},g?0:Fe)},[e]);t.useEffect(()=>{n===!1?u(!0):n===!0&&l(!0)},[n]);const c=t.useCallback(()=>{s(void 0),u(!1),l(!1)},[]);return{ready:n,shouldAnimate:i,fadeIn:r,setReady:d,reset:c}}const he=t.forwardRef(({isOpen:e,onCancel:n,focusOnOpen:s=!0,maxWidth:i,maxHeight:u,width:r,height:l,sideGap:d,padding:c,border:g,borderRadius:N,backdropColor:_,backdropBlur:R,portalTarget:I,className:h,style:A,children:j,...k},D)=>{const E=t.useRef(null);t.useImperativeHandle(D,()=>E.current,[]);const[b,z]=t.useState(!1),m=t.useMemo(()=>({...{...i!=null?{"--dialog-max-width":i}:{},...u!=null?{"--dialog-max-height":u}:{},...r!=null?{"--dialog-width":r}:{},...l!=null?{"--dialog-height":l}:{},...d!=null?{"--dialog-side-gap":d}:{},...c!=null?{"--dialog-padding":c}:{},...g!=null?{"--dialog-border":g}:{},...N!=null?{"--dialog-border-radius":N}:{},..._!=null?{"--dialog-backdrop-color":_}:{},...R!=null?{"--dialog-backdrop-blur":R}:{}},...A??{}}),[i,u,r,l,d,c,g,N,_,R,A]);t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{de(()=>{const o=E.current;if(o&&e!==void 0)try{e?(o.open||(o.showModal(),document.body.classList.add("no-scroll")),s&&o.focus()):o.open&&(o.close(),document.body.classList.remove("no-scroll"))}catch{}})},[e,s]);const S=o=>{if(o.preventDefault(),n){n();return}e===void 0&&E.current?.close()},w=f.jsx("dialog",{ref:E,className:te("dialog",h),style:m,onCancel:S,...k,children:j});if(!b)return null;const y=I??(typeof document<"u"?document.body:null);return y?me.createPortal(w,y):null}),je=(e,n)=>{const s=n-1,i=n-2;return n<=1?"100%":e===s?"70%":e===i?"85%":"100%"},ke=({rows:e=0})=>e<=0?f.jsx("div",{className:"skeleton skeleton__block","aria-busy":"true"}):f.jsx("div",{className:"skeleton skeleton__rows","aria-busy":"true",children:Array.from({length:e}).map((n,s)=>f.jsx("div",{className:"skeleton__row",style:{width:je(s,e)}},s))}),we=W.defaultWidth,xe=W.defaultAspectRatio,L=W.defaultObjectFit,O=e=>e!=null&&e!=="",ee=e=>e==="auto"?void 0:e,Ie=e=>e==="auto"||e===""?void 0:e,De=e=>{if(e==null||e===""||e==="auto")return;if(typeof e=="number")return Number.isFinite(e)&&e>0?e:void 0;const n=String(e).trim();if(!n)return;if(n.includes("/")){const[i,u]=n.split("/"),r=Number.parseFloat(i.trim()),l=Number.parseFloat(u.trim());return Number.isFinite(r)&&Number.isFinite(l)&&r>0&&l>0?r/l:void 0}const s=Number.parseFloat(n);if(Number.isFinite(s)&&s>0)return s};function ze({src:e,disableBlob:n=!1,disableLazyLoading:s=!1,disableAssetHash:i=!1,objectFit:u,aspectRatio:r,clickOpenMode:l="none",style:d,className:c,onLoad:g,onError:N,fetchPriority:_="auto",loading:R="eager",decoding:I="async",width:h,height:A,onClick:j,alt:k,...D},E){const{screenType:b}=ge(),z=Se(),{src:m}=be(e,n,i,_),{ready:S,setReady:w,reset:y}=Te(),[o,v]=t.useState(!1),[F,T]=t.useState("none"),{boxStyle:se,imgStyle:ne,useSizer:ae}=t.useMemo(()=>{const a=ee(h),J=ee(A),$=Ie(r),G=O(a),U=O(J),H=O($),K=!H&&!U,ie=G&&U?void 0:H?$:K?xe:void 0,ue=G?a:we,Q=U?J:void 0,ce=K&&u==null?L:u??L,V=De(ie),X=Q==null&&V!=null;return{boxStyle:{width:ue,height:Q,...X?{"--lazy-image-ar":V}:{}},imgStyle:{objectFit:ce},useSizer:X}},[r,u,h,A]),C=t.useMemo(()=>!(b===Y.Mobile||b===Y.Error),[b]),x=t.useCallback(a=>{w(a)},[w]);t.useEffect(()=>()=>{v(!1)},[]),t.useEffect(()=>{!m&&o&&v(!1)},[m,o]),t.useEffect(()=>{S===!1&&!s&&o&&v(!1)},[S,s,o]),t.useEffect(()=>{s||(e?(y(),T("none"),x(!1)):(y(),T("none")))},[e,y,x,s]),t.useEffect(()=>{if(!s){if(S===!1)T("fade");else if(S===!0&&F==="fade"){const a=requestAnimationFrame(()=>{T("fade-in")});return()=>{cancelAnimationFrame(a)}}}},[S,F,s]),t.useEffect(()=>{s&&(y(),T("none"))},[s,y]),t.useEffect(()=>{o&&!C&&v(!1)},[C,o]),t.useEffect(()=>{c&&Z()},[c]),t.useEffect(()=>{d&&Z()},[d]);const p=S===!1&&!s,M=l==="tab"&&!!m&&!p,B=l==="dialog"&&!!m&&!p&&C,q=(!!j||M||B)&&!p,re=s?{}:{"lazy-image__fade":F==="fade"||F==="fade-in","lazy-image__fade-in":F==="fade-in"},oe=p?{}:{"lazy-image__clickable":q},le=ae?{"lazy-image__sizer":!0}:{};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:te("lazy-image",re,oe,le),style:se,children:[p&&f.jsx(ye,{children:f.jsx("div",{className:"lazy-image__skeleton",children:f.jsx(ke,{})})}),m&&f.jsx("img",{...D,ref:E,src:m,alt:k,className:"lazy-image__image",draggable:!1,style:ne,onClick:a=>{if(p){a.preventDefault();return}if(j?.(a),!a.defaultPrevented){if(M){z(m);return}B&&v(!0)}},onLoad:a=>{x(!0),g?.(a)},onError:a=>{x(!0),N?.(a)},loading:R,decoding:I,..._?{fetchpriority:_}:{}})]}),q&&f.jsx(he,{isOpen:o,className:"lazy-image__dialog",onCancel:()=>v(!1),onClick:a=>{a.target===a.currentTarget&&v(!1)},children:f.jsx("img",{src:m,alt:k,className:"lazy-image__dialog-image",draggable:!1,onClick:a=>{a.stopPropagation()}})})]})}const Oe=t.forwardRef(ze);export{Oe as L,ke as S,Te as u};
