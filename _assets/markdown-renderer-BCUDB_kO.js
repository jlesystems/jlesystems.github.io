import{Z as v,$ as C,a0 as E,v as L,j as i,a1 as p,a2 as I,a3 as _}from"./index-DIdCSoZA.js";import{a as m,d as B,a5 as D,b as w,a6 as F,a7 as X,v as z}from"./preload-BYIKhQBs.js";import{u as S}from"./can-go-back-CiR1-CLs.js";import{C as O}from"./button-5CML60KB.js";import{L as W}from"./lazy-image-v3gLEfzv.js";import{S as G}from"./smart-link-nit6UY_6.js";import{M as Z}from"./index-DSqa7jBv.js";const $=t=>t.trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");function j(t){if(typeof t!="string"){try{const n=t,l=n[0];if(typeof l=="string"){const c=j(l);return{...c,content:[...[c.content?c.content+" ":void 0].filter(Boolean),...n.slice(1)]}}}catch{}return{content:t,hash:void 0,hasBackPrefix:!1,hasSubtitlePrefix:!1}}let e=t.trim(),s=!1,r=!1;e.startsWith(v)&&(s=!0,e=e.slice(v.length).trim()),e.startsWith(C)&&(r=!0,e=e.slice(C.length).trim());const a=E.exec(e);let o;if(a){const n=e.slice(a[0].length).trim(),l=a[1]?.trim(),c=l&&l.length?l:n;o=$(c??"")||void 0,e=n}return{content:e,hash:o,hasBackPrefix:s,hasSubtitlePrefix:r}}const h=t=>({children:s,...r})=>{const{content:a,hash:o}=j(s),n=o!==void 0?{[L]:o}:{};return m.createElement(t,{...r,...n},a)},q=({children:t,className:e,conditionalBack:s})=>{const{initialized:r,props:a}=S(),{content:o,hasBackPrefix:n}=m.useMemo(()=>j(t),[t]),l=n||s;return i.jsxs("h1",{className:B("mdx-heading-one","disable-mdx-styles",e),children:[l&&i.jsx(O,{...a,className:"mdx-heading-one__back-button",noPadding:!0,children:r&&i.jsx(D,{})}),o]})},K=h(q),U=h("h2"),V=h("h3"),J=h("h4"),Q=h("h5"),Y=h("h6");function tt(t){const e=/\[\s*([A-Za-z0-9_-]+)\s*(?::\s*([^\]]*?)\s*)?\]/g,s=[];let r;for(;(r=e.exec(t))!==null;){const n=r[1],l=(r[2]??"").trim();s.push({key:n,value:l.length?l:"true",raw:r[0]})}const a=t.replace(e,"").trim(),o={};for(const n of s)o[n.key]=n.value;return{tags:s,tagMap:o,altText:a}}const et=t=>{if(t!=null){if(typeof t=="number")return`${t}px`;if(typeof t=="string"&&t.trim())return t}},N=({float:t="right",flexWidth:e,aspectRatio:s,cropHeightMin:r,cropHeightMax:a,maxWidth:o,alt:n,...l})=>{const c=m.useMemo(()=>{if(!n?.trim())return{altText:n,ar:s,fw:e,chmin:r,chmax:a,mw:o};const{tagMap:u,altText:y}=tt(n);return{altText:y,ar:u[p.aspectRatio]??s,fw:u[p.flexWidth]??e,chmin:u[p.cropHeightMin]??r,chmax:u[p.cropHeightMax]??a,mw:u[p.maxWidth]??o}},[n,s,e,r,a,o]),x=m.useMemo(()=>({minHeight:c.chmin,maxHeight:c.chmax,maxWidth:c.mw,"--float-image--flex-width":et(c.fw)}),[c.fw,c.chmin,c.chmax,c.mw]);return i.jsx("div",{style:x,className:B("mdx-image","disable-mdx-styles",{"mdx-image__right":t==="right"}),children:i.jsx(W,{...l,alt:c.altText,aspectRatio:c.ar,clickOpenMode:"dialog"})})},st=({children:t,...e})=>i.jsx(G,{...e,children:t}),nt=({children:t,...e})=>i.jsx("div",{className:"mdx-subtitle disable-mdx-styles",children:i.jsx("p",{...e,className:"mdx-subtitle__text",children:t})}),rt=t=>typeof t=="string"&&t.trim()==="",at=t=>w.isValidElement(t)&&t.type===N,ot=({children:t,...e})=>{const{content:s,hasSubtitlePrefix:r}=w.useMemo(()=>j(t),[t]),a=w.Children.toArray(s).filter(o=>!rt(o));return a.length===1&&at(a[0])?i.jsx(i.Fragment,{children:a[0]}):r?i.jsx(nt,{...e,children:s}):i.jsx("p",{...e,children:s})},ct={p:ot,a:st,img:N,h1:K,h2:U,h3:V,h4:J,h5:Q,h6:Y},ft=({filePath:t,language:e,onReady:s,conditionalBack:r,components:a,waitOnImageLoad:o=!1})=>{const n=I(),{previousPath:l}=S(),[c,x]=m.useState(null),u=m.useRef(s),y=m.useRef(()=>{n(l,{replace:!0})}),M=m.useMemo(()=>({...ct,...a||{}}),[a]),P=m.useMemo(()=>r?{...M,h1:d=>{const f=M.h1||"h1";return i.jsx(f,{...d,conditionalBack:!0})}}:M,[M,r]),k=d=>{x(()=>d),u.current?.(!0)},A=()=>{x(null)};return m.useEffect(()=>{u.current=s},[s]),m.useEffect(()=>{let d=!1,f;A();const H=F(e,t);if(!H){_();const g=()=>i.jsxs("div",{className:"mdx-error",children:["Not found"," ",i.jsxs("code",{children:[e,"/",t]})]});d||(l?y.current():f=requestAnimationFrame(()=>k(g)));return}return H().then(async g=>{const R=g.default||g,b=g.images??[];b.length&&o&&await X(b.map(T=>()=>z(T,"high"))),d||k(R)}).catch(()=>{_()}),()=>{f&&cancelAnimationFrame(f),d=!0}},[e,t,o,l]),i.jsx("div",{className:"markdown-renderer markdown-styles",children:c?i.jsx(Z,{components:P,children:i.jsx(c,{})}):null})};export{ft as default};
