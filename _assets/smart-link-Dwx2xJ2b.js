import{a as et,r as l,aL as ot,aM as nt,aN as Q,f as V,p as z,u as rt,s as st,aO as at,ax as ct,h as N,aP as lt,aQ as ut,aR as it,j as P,aS as dt}from"./index-Dl5Nh_rX.js";const ht=(t,n=!0)=>r=>{t&&(r.key==="Enter"||n&&r.key===" ")&&(r.preventDefault(),t())};function ft(t){const{focusPreload:n}=et();return{createCustomFocus:l.useCallback((a,i)=>{if(n&&!((t[ot]||"").toString()==="true")){const e=t[nt];if(typeof e=="string"&&e.length>0){const s=Q(e),h=V(e,s);return()=>{a?.(),z(h,s)}}else if(i)return()=>{a?.(),i()}}return()=>{a?.()}},[t,n])}}function pt(){const t=rt(),n=l.useCallback((u,c)=>{st(u,c)},[]),r=l.useCallback((u,c)=>{const e=t.state?t.state[u]:void 0;return e===void 0?c:e},[t]),a=l.useCallback(u=>at(t,u),[t]),i=l.useCallback((u,c=!0)=>{const e=a(u),o=e.pathname||e.hash||e.search,s=o?!e.pathname&&(e.hash||e.search):void 0;return c?!o:!o||s},[a]);return{location:t,isCurrentRoute:i,getChangedParts:a,setState:n,getState:r}}const Tt=t=>{try{if(typeof CSS<"u"&&CSS.escape)return CSS.escape(t)}catch{}return t},mt=(t,n)=>{const r=(()=>{const i=n.replace(/^#/,"");try{return decodeURIComponent(i)}catch{return i}})();if(!r)return null;const a=Tt(r);return t.querySelector(`[${ct}="${r}"]`)??t.querySelector(`#${a}`)},St=(t,n,r=0)=>{const a=t.getBoundingClientRect();return n.getBoundingClientRect().top-a.top+t.scrollTop-r},gt=250,vt=900,Rt=2,Mt=1;let R,b=!1,w,M,A;const bt=()=>{try{return typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}},K=(t,n,r)=>Math.max(n,Math.min(r,t)),Ct=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,I=t=>t==="instant"?"auto":t,S=()=>{R!==void 0&&(cancelAnimationFrame(R),R=void 0),b=!1,w=void 0,M=void 0},U=()=>{A?.(),A=void 0},G=t=>{try{t.scrollTo({top:t.scrollTop,behavior:"auto"})}catch{const n=t.scrollTop;t.scrollTop=n}},Et=(t,n,r)=>Math.abs(t-n)<=r,Lt=t=>{U();const n=()=>{b&&(G(t),S())};return t.addEventListener("touchstart",n,{passive:!0}),t.addEventListener("wheel",n,{passive:!0}),window.addEventListener("keydown",n,{capture:!0}),A=()=>{t.removeEventListener("touchstart",n),t.removeEventListener("wheel",n),window.removeEventListener("keydown",n,!0)},A},D=(t,n,{minDurationMs:r=gt,maxDurationMs:a=vt,pxPerMs:i=Rt,epsilonPx:u=Mt}={})=>{const c=Math.max(0,n);if(b&&w===t&&M!==void 0&&Et(M,c,u))return;S(),G(t);const e=t.scrollTop,o=c-e;if(Math.abs(o)<=u){t.scrollTop=c;return}if(bt()){t.scrollTop=c;return}b=!0,w=t,M=c;const s=Math.abs(o),h=K(s/i,r,a),d=performance.now(),f=T=>{const g=K((T-d)/h,0,1),C=Ct(g);t.scrollTop=e+o*C,g<1?R=requestAnimationFrame(f):(R=void 0,t.scrollTop=c,b=!1,w=void 0,M=void 0)};R=requestAnimationFrame(f)},wt=24;let m,L=0;function At(){l.useEffect(()=>(L+=1,()=>{L-=1,L<=0&&(L=0,S(),U(),m=void 0)}),[]);const t=l.useCallback(e=>{const o=m?.current,s=e.current;o!==s&&(S(),U(),s&&Lt(s)),m=e},[]),n=l.useCallback(()=>{const e=m?.current;if(!e)return;const o=Math.abs(Math.round(e.scrollTop)+e.clientHeight-e.scrollHeight)<2;return e.scrollTop===0?"0":o?"1":`${(e.scrollTop+e.clientHeight/2)/e.scrollHeight}`},[]),r=l.useCallback(e=>{const o=m?.current;return!o||!e?0:Math.round(e*o.scrollHeight-o.clientHeight/2)},[]),a=l.useCallback((e="instant")=>{const o=m?.current;if(!o)return;const s=I(e);if(s==="smooth"){D(o,0);return}S(),o.scrollTo({top:0,behavior:s})},[]),i=l.useCallback((e,o="instant")=>{const s=e===void 0?typeof window<"u"?N(window.location):"/":N(e),{hash:h}=lt(s);if(!h)return!1;const d=m?.current;if(!d)return!1;const f=mt(d,h);if(!f)return!1;const T=Math.max(0,St(d,f,wt)),g=I(o);return g==="smooth"?(D(d,T),!0):(S(),d.scrollTo({top:T,behavior:g}),!0)},[]),u=l.useCallback((e,o="instant")=>{i(e,o)||a(o)},[i,a]),c=l.useCallback(({relative:e,absolute:o},s="instant")=>{const h=m?.current;if(!h)return;let d=0;if(o!==void 0&&(d=Number(o)),e!==void 0&&(d=r(Number(e))),!Number.isFinite(d))return;const f=Math.max(0,d),T=I(s);if(T==="smooth"){D(h,f);return}S(),h.scrollTo({top:f,behavior:T})},[r]);return{getRelativeScroll:n,getScrollTop:r,scrollToTop:a,scrollToHash:i,selectiveScroll:u,scrollToY:c,setRef:t,cancelSmoothScroll:S,node:m?.current}}function _t({to:t,href:n,target:r,rel:a,replace:i,disabled:u,children:c,className:e,style:o,onClick:s,onCustomFocus:h,...d},f){const{createCustomFocus:T}=ft(d),{isCurrentRoute:g,location:C}=pt(),{selectiveScroll:W}=At(),_=l.useMemo(()=>t??n,[n,t]),{resolved:y,blank:j,kind:E}=l.useMemo(()=>ut(_),[_]),{target:q,rel:$}=l.useMemo(()=>j?it(a,r):{target:r,rel:a},[j,r,a]),{onFocus:Y,onMouseEnter:J,...O}=l.useMemo(()=>d,[d]),H=(p=h)=>v=>{J?.call(null,v),p?.()},k=(p=h)=>v=>{Y?.call(null,v),p?.()};if(E==="none"||u)return P.jsx("span",{...O,ref:f,...u?{}:{role:s?"button":void 0,tabIndex:s?0:void 0,onMouseEnter:H(),onFocus:k(),onClick:s,onKeyDown:ht(s)},className:e,style:o,"aria-disabled":u,children:c});if(E==="router"||E=="router-hash"){let p,v;E==="router-hash"?p=N({pathname:C.pathname,hash:y,search:C.search}):(v=Q(y),p=V(y,v));const F=g(p,!1),B=i??F,X=T(h,()=>z(p,v)),Z=(()=>{if(F){const x=B?"smooth":"instant";return tt=>{s?.(tt),W(p,x)}}return x=>{s?.(x)}})();return P.jsx(dt,{...O,ref:f,to:p,target:q,rel:$,replace:B,onMouseEnter:H(X),onFocus:k(X),onClick:Z,className:e,style:o,"aria-current":F,children:c})}return P.jsx("a",{...O,ref:f,href:_,target:q,rel:$,onMouseEnter:H(),onFocus:k(),onClick:s,className:e,style:o,children:c})}const Ot=l.forwardRef(_t);export{Ot as S,ft as a,pt as b,ht as e,At as u};
