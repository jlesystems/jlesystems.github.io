import{Y as k,Z as H,$ as L,t as A,j as l,a0 as f,a1 as N,a2 as C}from"./index-dZo7T_Yr.js";import{a as m,d as _,a9 as D,b as w,aa as X,ab as I,v as z}from"./preload-OoidQG6T.js";import{u as v}from"./can-go-back-BO71whhi.js";import{C as O}from"./button-k9lDs4TK.js";import{L as W}from"./lazy-image-CvZ5j98f.js";import{S as G}from"./smart-link-CJilJkmv.js";import{M as Z}from"./index-Bmpszxnp.js";const $=t=>t.trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");function M(t){if(typeof t!="string"){try{const r=t,i=r[0];if(typeof i=="string"){const c=M(i);return{...c,content:[...[c.content?c.content+" ":void 0].filter(Boolean),...r.slice(1)]}}}catch{}return{content:t,hash:void 0,hasBackPrefix:!1,hasSubtitlePrefix:!1}}let e=t.trim(),s=!1,n=!1;e.startsWith(k)&&(s=!0,e=e.slice(k.length).trim()),e.startsWith(H)&&(n=!0,e=e.slice(H.length).trim());const a=L.exec(e);let o;if(a){const r=e.slice(a[0].length).trim(),i=a[1]?.trim(),c=i&&i.length?i:r;o=$(c??"")||void 0,e=r}return{content:e,hash:o,hasBackPrefix:s,hasSubtitlePrefix:n}}const d=t=>({children:s,...n})=>{const{content:a,hash:o}=M(s),r=o!==void 0?{[A]:o}:{};return m.createElement(t,{...n,...r},a)},F=({children:t,className:e,conditionalBack:s})=>{const{initialized:n,props:a}=v(),{content:o,hasBackPrefix:r}=m.useMemo(()=>M(t),[t]),i=r||s;return l.jsxs("h1",{className:_("mdx-heading-one","disable-mdx-styles",e),children:[i&&l.jsx(O,{...a,className:"mdx-heading-one__back-button",noPadding:!0,children:n&&l.jsx(D,{})}),o]})},K=d(F),U=d("h2"),V=d("h3"),Y=d("h4"),q=d("h5"),J=d("h6");function Q(t){const e=/\[\s*([A-Za-z0-9_-]+)\s*(?::\s*([^\]]*?)\s*)?\]/g,s=[];let n;for(;(n=e.exec(t))!==null;){const r=n[1],i=(n[2]??"").trim();s.push({key:r,value:i.length?i:"true",raw:n[0]})}const a=t.replace(e,"").trim(),o={};for(const r of s)o[r.key]=r.value;return{tags:s,tagMap:o,altText:a}}const tt=t=>{if(t!=null){if(typeof t=="number")return`${t}px`;if(typeof t=="string"&&t.trim())return t}},B=({float:t="right",flexWidth:e,aspectRatio:s,cropHeightMin:n,cropHeightMax:a,maxWidth:o,alt:r,...i})=>{const c=m.useMemo(()=>{if(!r?.trim())return{altText:r,ar:s,fw:e,chmin:n,chmax:a,mw:o};const{tagMap:u,altText:y}=Q(r);return{altText:y,ar:u[f.aspectRatio]??s,fw:u[f.flexWidth]??e,chmin:u[f.cropHeightMin]??n,chmax:u[f.cropHeightMax]??a,mw:u[f.maxWidth]??o}},[r,s,e,n,a,o]),x=m.useMemo(()=>({minHeight:c.chmin,maxHeight:c.chmax,maxWidth:c.mw,"--float-image--flex-width":tt(c.fw)}),[c.fw,c.chmin,c.chmax,c.mw]);return l.jsx("div",{style:x,className:_("mdx-image","disable-mdx-styles",{"mdx-image__right":t==="right"}),children:l.jsx(W,{...i,alt:c.altText,aspectRatio:c.ar,clickOpenMode:"dialog"})})},et=({children:t,...e})=>l.jsx(G,{...e,children:t}),st=({children:t,...e})=>l.jsx("div",{className:"mdx-subtitle disable-mdx-styles",children:l.jsx("p",{...e,className:"mdx-subtitle__text",children:t})}),rt=t=>typeof t=="string"&&t.trim()==="",nt=t=>w.isValidElement(t)&&t.type===B,at=({children:t,...e})=>{const{content:s,hasSubtitlePrefix:n}=w.useMemo(()=>M(t),[t]),a=w.Children.toArray(s).filter(o=>!rt(o));return a.length===1&&nt(a[0])?l.jsx(l.Fragment,{children:a[0]}):n?l.jsx(st,{...e,children:s}):l.jsx("p",{...e,children:s})},ot={p:at,a:et,img:B,h1:K,h2:U,h3:V,h4:Y,h5:q,h6:J},xt=({filePath:t,language:e,onReady:s,conditionalBack:n,components:a,waitOnImageLoad:o=!1})=>{const r=N(),{previousPath:i}=v(),[c,x]=m.useState(null),u=m.useRef(s),y=m.useRef(()=>{r(i,{replace:!0})}),g=m.useMemo(()=>({...ot,...a||{}}),[a]),S=m.useMemo(()=>n?{...g,h1:h=>{const p=g.h1||"h1";return l.jsx(p,{...h,conditionalBack:!0})}}:g,[g,n]),E=h=>{x(()=>h),u.current?.(!0)},P=()=>{x(null)};return m.useEffect(()=>{u.current=s},[s]),m.useEffect(()=>{let h=!1;P();const p=X(e,t);if(!p){C("MDX not found "+e+" "+t),!h&&i&&y.current();return}return p().then(async j=>{const R=j.default||j,b=j.images??[];b.length&&o&&await I(b.map(T=>()=>z(T,"high"))),h||E(R)}).catch(()=>{C("Error loading MDX "+e+" "+t)}),()=>{h=!0}},[e,t,o,i]),l.jsx("div",{className:"markdown-renderer markdown-styles",children:c?l.jsx(Z,{components:S,children:l.jsx(c,{})}):null})};export{xt as default};
