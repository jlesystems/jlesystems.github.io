import{r as u,I as P,_ as D,ax as v,ay as C,az as I,aA as N,e as X,j as l,k as B,aB as x,R as w,aC as z,aD as H,aE as O,aF as V}from"./index-DCVMByM4.js";import{g as W}from"./mdx-gTaaEbWv.js";import{u as _}from"./can-go-back-B5cWx8vl.js";import{C as F}from"./button-rqqQXHAH.js";import{L as G}from"./lazy-image-BicpelJK.js";import{S as $}from"./smart-link-BZytidV_.js";import{M as K}from"./index-uRVlfGnP.js";import"./markdown-renderer.lazy-Gj5qeyWZ.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Z=function(e,s){return u.createElement(P,D({},e,{ref:s,icon:U}))},q=u.forwardRef(Z);const J=t=>t.trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");function M(t){if(typeof t!="string"){try{const r=t,c=r[0];if(typeof c=="string"){const n=M(c);return{...n,content:[...[n.content?n.content+" ":void 0].filter(Boolean),...r.slice(1)]}}}catch{}return{content:t,hash:void 0,hasBackPrefix:!1,hasSubtitlePrefix:!1}}let e=t.trim(),s=!1,a=!1;e.startsWith(v)&&(s=!0,e=e.slice(v.length).trim()),e.startsWith(C)&&(a=!0,e=e.slice(C.length).trim());const o=I.exec(e);let i;if(o){const r=e.slice(o[0].length).trim(),c=o[1]?.trim(),n=c&&c.length?c:r;i=J(n??"")||void 0,e=r}return{content:e,hash:i,hasBackPrefix:s,hasSubtitlePrefix:a}}const d=t=>({children:s,...a})=>{const{content:o,hash:i}=M(s),r=i!==void 0?{[N]:i}:{};return u.createElement(t,{...a,...r},o)},Q=({children:t,className:e,conditionalBack:s})=>{const{t:a}=X(),{initialized:o,props:i}=_(),{content:r,hasBackPrefix:c}=u.useMemo(()=>M(t),[t]),n=c||s;return l.jsxs("h1",{className:B("mdx-heading-one",e),children:[n&&l.jsx(F,{...i,variant:"secondary-b",className:"mdx-heading-one__back-button disable-mdx-styles",noPadding:!0,"aria-label":a("content.markdownRenderer.backButton"),children:o&&l.jsx(q,{})}),r]})},Y=d(Q),tt=d("h2"),et=d("h3"),st=d("h4"),rt=d("h5"),nt=d("h6"),at=t=>{const e=/\[\s*([A-Za-z0-9_-]+)\s*(?::\s*([^\]]*?)\s*)?\]/g,s=[];let a;for(;(a=e.exec(t))!==null;){const r=a[1],c=(a[2]??"").trim();s.push({key:r,value:c.length?c:"true",raw:a[0]})}const o=t.replace(e,"").trim(),i={};for(const r of s)i[r.key]=r.value;return{tags:s,tagMap:i,altText:o}},ot=t=>{if(t!=null){if(typeof t=="number")return`${t}px`;if(typeof t=="string"&&t.trim())return t}},E=({float:t="right",flexWidth:e,aspectRatio:s,cropHeightMin:a,cropHeightMax:o,maxWidth:i,alt:r,...c})=>{const n=u.useMemo(()=>{if(!r?.trim())return{altText:r,ar:s,fw:e,chmin:a,chmax:o,mw:i};const{tagMap:m,altText:y}=at(r);return{altText:y,ar:m[x.aspectRatio]??s,fw:m[x.flexWidth]??e,chmin:m[x.cropHeightMin]??a,chmax:m[x.cropHeightMax]??o,mw:m[x.maxWidth]??i}},[r,s,e,a,o,i]),h=u.useMemo(()=>({minHeight:n.chmin,maxHeight:n.chmax,maxWidth:n.mw,"--float-image--flex-width":ot(n.fw)}),[n.fw,n.chmin,n.chmax,n.mw]);return l.jsx("div",{style:h,className:B("mdx-image","disable-mdx-styles",{"mdx-image__right":t==="right"}),children:l.jsx(G,{...c,alt:n.altText,aspectRatio:n.ar,clickOpenMode:"dialog"})})},k=t=>t==null||typeof t=="boolean"?"":typeof t=="string"||typeof t=="number"?String(t):Array.isArray(t)?t.map(k).join(""):u.isValidElement(t)?k(t.props.children):"",it=({children:t,...e})=>{const s=k(t).trim();return l.jsx($,{...e,"aria-label":s,children:t})},ct=({children:t,...e})=>l.jsx("div",{className:"mdx-subtitle disable-mdx-styles",children:l.jsx("p",{...e,className:"mdx-subtitle__text",children:t})}),lt=t=>typeof t=="string"&&t.trim()==="",ut=t=>w.isValidElement(t)&&t.type===E,mt=({children:t,...e})=>{const{content:s,hasSubtitlePrefix:a}=w.useMemo(()=>M(t),[t]),o=w.Children.toArray(s).filter(i=>!lt(i));return o.length===1&&ut(o[0])?l.jsx(l.Fragment,{children:o[0]}):a?l.jsx(ct,{...e,children:s}):l.jsx("p",{...e,children:s})},ft={p:mt,a:it,img:E,h1:Y,h2:tt,h3:et,h4:st,h5:rt,h6:nt},wt=({filePath:t,language:e,onReady:s,conditionalBack:a,components:o,waitOnImageLoad:i=!1})=>{const r=z(),{previousPath:c}=_(),[n,h]=u.useState(null),m=u.useRef(s),y=u.useRef(()=>{r(c,{replace:!0})}),g=u.useMemo(()=>({...ft,...o||{}}),[o]),L=u.useMemo(()=>a?{...g,h1:f=>{const p=g.h1||"h1";return l.jsx(p,{...f,conditionalBack:!0})}}:g,[g,a]),R=f=>{h(()=>f),m.current?.(!0)},S=()=>{h(null)};return u.useEffect(()=>{m.current=s},[s]),u.useEffect(()=>{let f=!1;S();const p=W(e,t);if(!p){H("[markdown-renderer] MDX not found "+e+" "+t),!f&&c&&y.current();return}return p().then(async b=>{const T=b.default||b,j=b.images??[];j.length&&i&&await O(j.map(A=>()=>V(A,"high"))),f||R(T)}).catch(()=>{H("[markdown-renderer] Error loading MDX "+e+" "+t)}),()=>{f=!0}},[e,t,i,c]),l.jsx("div",{className:"markdown-renderer markdown-styles",children:n?l.jsx(K,{components:L,children:l.jsx(n,{})}):null})};export{wt as default};
