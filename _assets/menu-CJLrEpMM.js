import{u as P,a as U,b as se,s as ne,r as C,S as i,c as oe,g as re,d as ae,p as ie,j as e,e as le,f as ce,h as ue,i as me,k as de,l as fe,n as w,m as $,R as pe,o as g,E as A,G as _e,N as xe,L as Te}from"./index-DlnD6Mo7.js";import{a as s,d as S,A as a,S as m,W as H,X as Ie,Y as Ee,Z as Se,D as G,$ as he,a0 as je,a1 as v}from"./preload-Ln-JD2qp.js";import{S as Me}from"./smart-link-YjuTwe-C.js";import{C as Z,u as Re}from"./text-CRBgfapq.js";import{C as k}from"./button-MptiScL_.js";import{L as ge}from"./lazy-image-BGWpedMZ.js";const Ne="0.5s",be={sideBarTransitionTime:Ne},W="expanded",Le=100;function Ae(l){const x=P(),{shrinking:c,growing:n}=U(),{withTimeout:o}=se(),[f,T]=s.useState(!1),[p,u]=s.useState(),[N,h]=s.useState(!1),j=s.useRef(p),d=s.useRef(l),M=()=>{h(!0);const r=setTimeout(()=>{h(!1)},50);return()=>{clearTimeout(r)}},R=s.useCallback(r=>{r!==void 0&&o(()=>{ne(W,r.toString())},Le)},[o]);return s.useEffect(()=>{j.current=p,R(p),p!==void 0&&T(!0)},[p,R]),s.useEffect(()=>C(()=>{let r;return d.current===i.Mobile&&l!==i.Mobile&&(r=M()),d.current!==i.Desktop&&l===i.Desktop&&u(!0),d.current===i.Desktop&&l!==i.Desktop&&u(!1),d.current=l,()=>{r?.()}}),[l]),s.useEffect(()=>C(()=>{c&&d.current===i.Tablet&&u(!1),n&&d.current===i.Desktop&&u(!0)}),[c,n]),oe(()=>C(()=>{let r;const b=re(W);return b?(r=M(),u(b==="true")):(d.current!==i.Desktop?u(!1):j.current===void 0&&(r=M(),u(!0)),R(j.current)),()=>{r?.()}}),[x.key,R]),{expanded:p,setExpanded:u,initialized:f,suppressTransition:N}}const Ce=({className:l=""})=>{const{display:x,queue:c}=ae(),{pathname:n,hash:o}=P(),{focusPreload:f}=U(),T=s.useMemo(()=>f?()=>{ie(n,c[1])}:void 0,[f,n,c]);return e.jsx(k,{className:`language-rotator ${l}`,to:le(ce({pathname:n,hash:o}),c[0]),onClick:T,replace:!0,children:x})},F=({icon:l,name:x,expanded:c,selected:n,tooltip:o,noMargin:f,center:T,ellipsis:p,onClick:u,onConditionalClick:N,onCustomFocus:h,to:j,href:d})=>e.jsxs(k,{className:S("menu-item",{"menu-item__no-margin":f,"menu-item__expanded":c,"menu-item__selected":n}),selected:n,selectable:!0,noPadding:!0,tooltip:o,tooltipTitle:x,onClick:u,onConditionalClick:N,onCustomFocus:h,to:j,href:d,children:[e.jsx("div",{className:"menu-item__icon-container",children:l}),e.jsx("div",{className:S("menu-item__title",{"menu-item__title-center":T}),children:e.jsx(Z,{className:S("text__no-wrap",{"text__no-ellipsis":!p}),children:x})})]}),V=m.applicationShortName,q=m.titleImagePath,K=m.menuItems;m.loginPolicy;m.showUnauthorizedProfile;const ke=m.languageSwitch,ve=m.articles,De=m.standaloneArticles,we=m.additionalRoutes,$e=m.ellipsis.includes(v.Title),X=m.ellipsis.includes(v.MenuItem),Pe=m.centerMenuComponent.includes(v.Title),Y=m.centerMenuComponent.includes(v.MenuItem),Ue=fe(be.sideBarTransitionTime),We=()=>{const l=ue(t=>t.user),x=P(),{t:c}=me(),{screenType:n}=U(),{expanded:o,setExpanded:f,initialized:T,suppressTransition:p}=Ae(n),{scrollToTop:u}=Re(),[N,h]=s.useState(!1),[j,d]=s.useState(!1),M=l?.authenticated,R=l?.role,r=s.useRef(null),b=s.useRef(null),B=s.useMemo(()=>n===i.Mobile,[n]),y=s.useMemo(()=>n!==i.Desktop,[n]);s.useMemo(()=>!0,[M]);const J=s.useMemo(()=>!0,[M]);s.useMemo(()=>a.Settings,[J]);const D=s.useMemo(()=>de(x.pathname),[x.pathname]),z=s.useMemo(()=>K.filter(t=>!0),[R]),L=s.useCallback(()=>{y&&f(!1),u()},[f,u,y]),I=()=>{const t=r.current;if(!t)return;const{scrollTop:_,scrollHeight:E,clientHeight:Q}=t,ee=_<=1,te=E-_-Q<=1;h(!ee),d(!te)},O=(t="instant")=>{const _=r.current;if(_){const E=_.querySelector('[aria-current="page"], .menu-item__selected');E&&E.scrollIntoView({block:"nearest",behavior:t})}};return s.useEffect(()=>C(()=>{const t=r.current;if(t)return I(),t.addEventListener("scroll",I),window.addEventListener("resize",I),()=>{t.removeEventListener("scroll",I),window.removeEventListener("resize",I)}}),[T]),s.useEffect(()=>{I(),O()},[z.length]),s.useEffect(()=>{h(!1),d(!1);let t;return n!==i.Mobile?(I(),O()):t=setTimeout(()=>{I()},Ue),()=>{t!==void 0&&clearTimeout(t)}},[o,n]),T?e.jsxs("div",{className:"menu",children:[e.jsxs("div",{className:S("menu__sidebar",{"menu__sidebar-expanded":o,"menu__sidebar-suppress-transition":p}),children:[e.jsxs("header",{role:"banner",className:"menu__header",children:[e.jsx(k,{className:"menu__open-button",onClick:()=>{f(!o)},children:n!==i.Desktop?o?n===i.Tablet?e.jsx(H,{}):e.jsx(Ie,{}):e.jsx(Ee,{}):o?e.jsx(H,{}):e.jsx(Se,{})}),e.jsx(Me,{className:S("menu__title",{"menu__title-center":Pe,"menu__title-clickable":B}),onConditionalClick:L,disabled:!B,to:"/",children:q?e.jsx("div",{className:"menu__title-image",children:e.jsx(ge,{src:q,alt:V+" "+c("images.titleLogo"),aspectRatio:1})}):e.jsx(Z,{className:S("menu__title-text","text__no-wrap",{"text__no-ellipsis":!$e}),children:V})})]}),e.jsxs("nav",{role:"navigation",ref:r,className:S("menu__items",{"menu__items-top-border":N,"menu__items-bottom-border":j}),children:[z.map(t=>{const _=t.route===G,E=_?a.Root:t.route;return e.jsx(F,{icon:e.jsx(t.icon,{}),name:c($(E).name),expanded:o,noMargin:_,ellipsis:X,center:Y,selected:E===D,tooltip:!o,to:w(E),onConditionalClick:L},`menuItem-${t.route}`)}),e.jsx(F,{icon:e.jsx(he,{}),name:c($(a.Articles.Main).name),expanded:o,ellipsis:X,center:Y,selected:a.Articles.Main===D,tooltip:!o,to:w(a.Articles.Main),onConditionalClick:L},`menuItem-${a.Articles}`)]}),e.jsxs("div",{className:"menu__footer",children:[!1,e.jsx(k,{className:"menu__footer-button",selected:D===a.Info,selectable:!0,tooltip:!0,tooltipTitle:c($(a.Info).name),tooltipPlacement:o?"top":"right",to:w(a.Info),onConditionalClick:L,children:e.jsx(je,{})}),ke&&e.jsx(Ce,{className:"menu__footer-button"})]})]}),e.jsx("div",{ref:b,className:S("menu__content",{"menu__content-expanded":o,"menu__content-suppress-transition":p}),onClick:()=>{n===i.Tablet&&f(!1)},children:e.jsx(s.Suspense,{fallback:e.jsx(Te,{}),children:e.jsxs(pe,{children:[K.map(t=>{const _=t.route===G;return e.jsx(g,{path:_?a.Root:t.route,element:A(t.route)},`route-${t.route}`)}),e.jsx(g,{path:a.Articles.Main,element:A(a.Articles.Main)},`route-${a.Articles.Main}`),!1,e.jsx(g,{path:a.Info,element:A(a.Info)},`route-${a.Info}`),!De&&ve.map(t=>e.jsx(g,{path:t,element:e.jsx(_e,{route:t,conditionalBack:!0})},`route-${t.replace("/","-")}`)),we.filter(t=>t.renderType==="standalone").map(t=>e.jsx(g,{path:t.route,element:A(t.route,t.props)},`route-${t.route.replace("/","-")}`)),e.jsx(g,{path:"*",element:e.jsx(xe,{})},"route-not-found")]})})})]}):null};export{We as default};
