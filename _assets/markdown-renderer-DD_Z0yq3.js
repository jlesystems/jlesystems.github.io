import{r as m,I as T,_ as A,au as j,av as H,aw as I,ax as N,j as l,k as _,ay as x,a2 as y,az as D,aA as C,aB as X,aC as z}from"./index-CyOUYLAt.js";import{g as O}from"./mdx-B01dXs9F.js";import{u as b}from"./can-go-back-DV3YGnAY.js";import{C as W}from"./button-DzBirGU8.js";import{L as G}from"./lazy-image-X3SFUsUV.js";import{S as V}from"./smart-link-DScHVMZl.js";import{M as $}from"./index-6tcBlOCU.js";import"./markdown-renderer.lazy-DQnfVP-s.js";var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},K=function(e,s){return m.createElement(T,A({},e,{ref:s,icon:F}))},U=m.forwardRef(K);const Z=t=>t.trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");function M(t){if(typeof t!="string"){try{const r=t,i=r[0];if(typeof i=="string"){const c=M(i);return{...c,content:[...[c.content?c.content+" ":void 0].filter(Boolean),...r.slice(1)]}}}catch{}return{content:t,hash:void 0,hasBackPrefix:!1,hasSubtitlePrefix:!1}}let e=t.trim(),s=!1,n=!1;e.startsWith(j)&&(s=!0,e=e.slice(j.length).trim()),e.startsWith(H)&&(n=!0,e=e.slice(H.length).trim());const a=I.exec(e);let o;if(a){const r=e.slice(a[0].length).trim(),i=a[1]?.trim(),c=i&&i.length?i:r;o=Z(c??"")||void 0,e=r}return{content:e,hash:o,hasBackPrefix:s,hasSubtitlePrefix:n}}const h=t=>({children:s,...n})=>{const{content:a,hash:o}=M(s),r=o!==void 0?{[N]:o}:{};return m.createElement(t,{...n,...r},a)},q=({children:t,className:e,conditionalBack:s})=>{const{initialized:n,props:a}=b(),{content:o,hasBackPrefix:r}=m.useMemo(()=>M(t),[t]),i=r||s;return l.jsxs("h1",{className:_("mdx-heading-one",e),children:[i&&l.jsx(W,{...a,className:"mdx-heading-one__back-button",noPadding:!0,children:n&&l.jsx(U,{})}),o]})},J=h(q),Q=h("h2"),Y=h("h3"),tt=h("h4"),et=h("h5"),st=h("h6"),rt=t=>{const e=/\[\s*([A-Za-z0-9_-]+)\s*(?::\s*([^\]]*?)\s*)?\]/g,s=[];let n;for(;(n=e.exec(t))!==null;){const r=n[1],i=(n[2]??"").trim();s.push({key:r,value:i.length?i:"true",raw:n[0]})}const a=t.replace(e,"").trim(),o={};for(const r of s)o[r.key]=r.value;return{tags:s,tagMap:o,altText:a}},nt=t=>{if(t!=null){if(typeof t=="number")return`${t}px`;if(typeof t=="string"&&t.trim())return t}},B=({float:t="right",flexWidth:e,aspectRatio:s,cropHeightMin:n,cropHeightMax:a,maxWidth:o,alt:r,...i})=>{const c=m.useMemo(()=>{if(!r?.trim())return{altText:r,ar:s,fw:e,chmin:n,chmax:a,mw:o};const{tagMap:u,altText:w}=rt(r);return{altText:w,ar:u[x.aspectRatio]??s,fw:u[x.flexWidth]??e,chmin:u[x.cropHeightMin]??n,chmax:u[x.cropHeightMax]??a,mw:u[x.maxWidth]??o}},[r,s,e,n,a,o]),f=m.useMemo(()=>({minHeight:c.chmin,maxHeight:c.chmax,maxWidth:c.mw,"--float-image--flex-width":nt(c.fw)}),[c.fw,c.chmin,c.chmax,c.mw]);return l.jsx("div",{style:f,className:_("mdx-image","disable-mdx-styles",{"mdx-image__right":t==="right"}),children:l.jsx(G,{...i,alt:c.altText,aspectRatio:c.ar,clickOpenMode:"dialog"})})},at=({children:t,...e})=>l.jsx(V,{...e,children:t}),ot=({children:t,...e})=>l.jsx("div",{className:"mdx-subtitle disable-mdx-styles",children:l.jsx("p",{...e,className:"mdx-subtitle__text",children:t})}),ct=t=>typeof t=="string"&&t.trim()==="",it=t=>y.isValidElement(t)&&t.type===B,lt=({children:t,...e})=>{const{content:s,hasSubtitlePrefix:n}=y.useMemo(()=>M(t),[t]),a=y.Children.toArray(s).filter(o=>!ct(o));return a.length===1&&it(a[0])?l.jsx(l.Fragment,{children:a[0]}):n?l.jsx(ot,{...e,children:s}):l.jsx("p",{...e,children:s})},mt={p:lt,a:at,img:B,h1:J,h2:Q,h3:Y,h4:tt,h5:et,h6:st},wt=({filePath:t,language:e,onReady:s,conditionalBack:n,components:a,waitOnImageLoad:o=!1})=>{const r=D(),{previousPath:i}=b(),[c,f]=m.useState(null),u=m.useRef(s),w=m.useRef(()=>{r(i,{replace:!0})}),g=m.useMemo(()=>({...mt,...a||{}}),[a]),L=m.useMemo(()=>n?{...g,h1:d=>{const p=g.h1||"h1";return l.jsx(p,{...d,conditionalBack:!0})}}:g,[g,n]),S=d=>{f(()=>d),u.current?.(!0)},E=()=>{f(null)};return m.useEffect(()=>{u.current=s},[s]),m.useEffect(()=>{let d=!1;E();const p=O(e,t);if(!p){C("[markdown-renderer] MDX not found "+e+" "+t),!d&&i&&w.current();return}return p().then(async k=>{const R=k.default||k,v=k.images??[];v.length&&o&&await X(v.map(P=>()=>z(P,"high"))),d||S(R)}).catch(()=>{C("[markdown-renderer] Error loading MDX "+e+" "+t)}),()=>{d=!0}},[e,t,o,i]),l.jsx("div",{className:"markdown-renderer markdown-styles",children:c?l.jsx($,{components:L,children:l.jsx(c,{})}):null})};export{wt as default};
